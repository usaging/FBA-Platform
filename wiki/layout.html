<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="{{url_for('static', filename = 'starting/logo.png')}}" />
    <link rel="license" href="https://creativecommons.org/licenses/by/4.0/" />

    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename = 'css/base.css')}}" rel="stylesheet">
    <link href="{{ url_for('static', filename = 'css/nav.css')}}" rel="stylesheet">
    <link href="{{ url_for('static', filename = 'css/top-nav.css')}}" rel="stylesheet">

    <!-- 引入字体图标 -->
    <link rel="stylesheet" href="{{url_for('static',filename='icons/font/iconfont.css')}}">

    <title>{% block title %}{% endblock %} | SCUT-China-L - iGEM 2025</title>
</head>

<body>

    <div id="loading-overlay">
        <img src="{{url_for('static', filename = 'loading.gif')}}" alt="加载中" class="loading-gif">
    </div>

    {% include 'nav.html' %}
    {% include 'top-nav.html' %}

    <!-- Page Content -->
    <div class="content" style="opacity:0;transition:opacity 0.3s ease">
        {% block page_content %}{% endblock %}
    </div>

    <script>

        window.addEventListener('load', function () {
            setTimeout(function () {
                document.getElementById('loading-overlay').style.display = 'none';
                document.querySelector('.content').style.opacity = 1;
            }, 300);
        });

        // 暗黑模式切换
        const darkModeToggle = document.getElementById('darkModeToggle');
        if (darkModeToggle) {
            darkModeToggle.addEventListener('change', () => {
                document.body.classList.toggle('dark');
                localStorage.setItem('darkMode', darkModeToggle.checked);
            });

            // 初始化暗黑模式状态
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark');
                darkModeToggle.checked = true;
            }
        }

        // 高亮当前页面导航项
        document.addEventListener('DOMContentLoaded', () => {
            const currentPath = window.location.pathname;
            document.querySelectorAll('.nav-link a').forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                    // 展开父菜单
                    const submenu = link.closest('.submenu');
                    if (submenu) {
                        submenu.classList.add('active');
                        const toggle = submenu.closest('.has-submenu').querySelector('.submenu-toggle');
                        toggle.classList.add('icon-arrow-up');
                        toggle.classList.remove('icon-arrow-down');
                    }
                }
            });
        });
    </script>
</body>

</html>